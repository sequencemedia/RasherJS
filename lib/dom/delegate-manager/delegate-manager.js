'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.DelegateManager=exports.detach=exports.attach=exports.create=undefined;var _bom=require('../../bom/bom');var _rasher=require('../rasher');var _eventManager=require('../event-manager');var _match=require('../match');var _query=require('../query');function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var eventManager=new _eventManager.EventManager();var attachDelegateWithPhase=function attachDelegateWithPhase(type,element,_ref){var delegate=_ref.delegate,phase=_ref.phase;eventManager.attach(type,element,delegate,phase);};var detachDelegateWithPhase=function detachDelegateWithPhase(type,element,_ref2){var delegate=_ref2.delegate,phase=_ref2.phase;eventManager.detach(type,element,delegate,phase);};var attachDelegate=function attachDelegate(type,element,subscription){var supplementary=subscription.supplementary;if(supplementary){var index=0;var limit=supplementary.length;for(index,limit;index<limit;index=index+1){var _supplementary$index=supplementary[index],_type=_supplementary$index.type,delegate=_supplementary$index.delegate;eventManager.attach(_type,element,delegate);}}else{var _delegate=subscription.delegate;eventManager.attach(type,element,_delegate);}};var detachDelegate=function detachDelegate(type,element,subscription){var supplementary=subscription.supplementary;if(supplementary){var index=0;var limit=supplementary.length;for(index,limit;index<limit;index=index+1){var _supplementary$index2=supplementary[index],_type2=_supplementary$index2.type,delegate=_supplementary$index2.delegate;eventManager.detach(_type2,element,delegate);}}else{var _delegate2=subscription.delegate;eventManager.detach(type,element,_delegate2);}};var create=exports.create=function create(type,element,selector,handler,context){return function(e){var normalizedEvent=eventManager.normalizeEvent(e);var targetNode=eventManager.eventTargetFor(normalizedEvent);if(targetNode.disabled){return false;}else{var match=new _match.Match(new _query.Query(element));var ELEMENT=match.matchFrom(targetNode,selector);return ELEMENT?handler.call(context||ELEMENT,new(eventManager.eventFacadeFor(type))(normalizedEvent,ELEMENT)):false;}};};var attach=exports.attach=_bom.ATTACH===1?attachDelegateWithPhase:_bom.ATTACH===3?attachDelegate:_rasher.notSupported;var detach=exports.detach=_bom.DETACH===2?detachDelegateWithPhase:_bom.DETACH===5?detachDelegate:_rasher.notSupported;var DelegateManager=exports.DelegateManager=function DelegateManager(){_classCallCheck(this,DelegateManager);this.create=create;this.attach=attach;this.detach=detach;};